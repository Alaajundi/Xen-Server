# Multipath configuration for XenServer Fiber Channel storage
# Generated by Ansible

defaults {
    user_friendly_names yes
    polling_interval 5
    path_selector "{{ multipath_path_grouping | default('round-robin 0') }}"
    path_grouping_policy {{ multipath_path_grouping | default('group_by_prio') }}
    failback {{ multipath_failback | default('immediate') }}
    no_path_retry {{ multipath_no_path_retry | default(5) }}
    rr_min_io 100
}

# Device blacklist - exclude local disks from multipathing
blacklist {
    devnode "^sda$"
    devnode "^sdb$"
    devnode "^sdc$"
    devnode "^sdd$"
    devnode "^md[0-9]+$"
    devnode "^dm-[0-9]+$"
    devnode "^hd[a-z]"
}

# HP 3PAR configuration (example - adjust for your storage)
devices {
    device {
        vendor "3PARdata"
        product "VV"
        path_grouping_policy group_by_prio
        prio alua
        path_selector "round-robin 0"
        path_checker tur
        features "0"
        hardware_handler "1 alua"
        failback immediate
        rr_weight uniform
        no_path_retry 18
        rr_min_io 100
    }
}

# Add additional device configurations for your specific storage vendor
# Uncomment and modify as needed:

# Dell EMC
# devices {
#     device {
#         vendor "DGC"
#         product ".*"
#         path_grouping_policy group_by_prio
#         prio alua
#         path_checker emc_clariion
#         failback immediate
#         no_path_retry 60
#     }
# }

# NetApp
# devices {
#     device {
#         vendor "NETAPP"
#         product "LUN.*"
#         path_grouping_policy group_by_prio
#         prio ontap
#         failback immediate
#         no_path_retry queue
#     }
# }
